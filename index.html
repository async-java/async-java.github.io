

<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

<!--<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>-->

<script src="http://shjs.sourceforge.net/sh_main.js"></script>
<script src="http://shjs.sourceforge.net/lang/sh_java.js"></script>
<link rel="stylesheet" href="http://shjs.sourceforge.net/sh_style.css">

<style>

    .version-selection-scroll-panel {
        width: 15%;
        height: 100%;
        overflow-y: scroll;
    }

    .flex-container {
        display: flex;
    }

    .flex-vertical-container {
        display: flex;
        flex-direction: column;
    }

    html, body {
        margin: 0;
        height: 100%;
        overflow: hidden
    }

</style>

<script>

  let local = false;
  const asyncc = window.__asyncc__ = {};
  asyncc.latestVersion = 'v/0.1.0';
  asyncc.root = "https://async-java.github.io/";

  asyncc.changeIframe = (versionPath) => {
    let iframe = document.getElementsByClassName("main-iframe");
    if (!iframe) {
      return alert('Could not find iframe on page.');
    }

    iframe.src = versionPath;
  };

  asyncc.newIFrame = (v) => {
    const el = document.getElementById('foox');
    el.innerHTML = `<iframe id="main-iframe" src="${v}" width="100%" height="100%"></iframe>;`;
  };

  asyncc.getFrame = () => {
    return fetch('md/html-from-md.html')
      .then(r => {
        const el = document.getElementById('foox');
        return r.text().then(v => {
          console.log('here is the text:',v);
          // var div = document.createElement("div");
          el.innerHTML = `<div style="overflow: scroll;" width="100%" height="100%">${v}</div>`;
          // el.textContent = v;
          // el.appendChild(div);
        });
      });
  };

</script>

<div class="flex-container">

    <div class="version-selection-scroll-panel">
        <div class="flex-vertical-container">
            <button onclick="asyncc.newIFrame('v/0.1.0')">version 0.1.1</button>
            <button onclick="asyncc.newIFrame('v/0.1.2')">version 0.1.2</button>
            <button onclick="asyncc.newIFrame('v/0.1.3')">version 0.1.3</button>
            <button onclick="asyncc.getFrame('v/0.1.3')">get markdown</button>
            <button onclick="asyncc.newIFrame('v/0.1.0')">new iframe</button>
        </div>
    </div>
    <div id="foox" style="display: flex; flex-grow: 1">
        <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>
    </div>
</div>

<script>
  asyncc.changeIframe('v/0.1.2');
</script>

<script>

 window.onload= function () {
   sh_highlightDocument();
 };

</script>
